<!-- app/views/chats/new.html.erb -->

<div class="container-fluid vh-100">
  <div class="row h-100 align-items-start">

    <!-- Coluna do contexto do mês -->
    <div class="col-4 px-4 bg-light h-100 py-5">
      <p class="text-success text-uppercase small fw-semibold mb-3">Finance AI Assistant</p>
      <h4 class="fw-bold mb-3"><%= @month_number %> <%= @month_year %></h4>

      <h6 class="text-muted text-uppercase small mt-4">Overview</h6>
      <p class="small"><%= @month_summary.present? ? @month_summary : "No overview provided." %></p>

      <hr>

      <%= link_to "Back to month", month_path(@month), class: "btn btn-outline-secondary btn-sm" %>
    </div>

    <!-- Coluna do chat -->
    <div class="col-8 d-flex flex-column h-100 py-5 px-5">
      <h4 class="fw-bold mb-4">Ask AI for help</h4>
      <p class="text-muted mb-4">
        Ask questions about your finances for <%= @month_number %> <%= @month_year %>.
        The AI assistant will analyze your data and give personalized advice.
      </p>

      <!-- Área de mensagens -->
      <div class="flex-grow-1 border rounded p-3 mb-3 bg-white" style="overflow-y: auto; min-height: 300px;" id="chat-messages">
        <p class="text-muted text-center">Start a conversation by typing a question below.</p>
      </div>

      <!-- Formulário de pergunta -->
      <%= form_with url: month_chats_path(@month), method: :post, local: true, class: "d-flex gap-2" do |f| %>
        <%= f.text_field :question, class: "form-control", placeholder: "Ask something about your finances...", autofocus: true %>
        <%= f.submit "Send", class: "btn btn-success" %>
      <% end %>

      <p class="text-muted small mt-2">
        <em>Note: AI integration coming soon. For now, this is a preview of the chat interface.</em>
      </p>
    </div>

  </div>
</div>
